<div class="sub-page-container">
    <div *ngIf="updateState" class="overlay" (click)="updateState = false"></div>
    <task-update-form (updated)="taskUpdated($event)" [task]="task" [projects]="projects" [list]="list" [users]="users" *ngIf="updateState">
    </task-update-form>
    <!-- task toolbar -->
    <div class="row view-toolbar-container">
        <div class="col-sm-4">
            <h2>{{task.taskName}}</h2>
        </div>
        <div class="col-sm-8 text-center">
            <div class="col-sm-3">
                <a *ngIf="!task.taskStarted" class="task-buttons start noselect" (click)="updateStartedPaused()">
                    <i class="fa fa-play" aria-hidden="true"></i>
                </a>
                <a *ngIf="task.taskStarted" class="task-buttons pause noselect" (click)="updateStartedPaused()">
                    <i class="fa fa-pause" aria-hidden="true"></i>
                </a>
            </div>
            <div class="col-sm-2">
                <a class="task-links noselect" (click)="updateState = !updateState">
                        <i class="fa fa-edit" aria-hidden="true"></i> Edit
                </a>
            </div>
            <div class="col-sm-2">
                <a class="task-links noselect">
                    <i class="fa fa-exchange" aria-hidden="true"></i> Assign
                </a>
            </div>
            <div class="col-sm-2">
                <a class="task-links noselect">
                    <i class="fa fa-history" aria-hidden="true"></i> Activity
                </a>
            </div>
            <div class="col-sm-3">
                <a class="task-buttons noselect">
                    <i class="fa fa-check" aria-hidden="true"></i>
                </a>
            </div>
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="task-body">
        <div class="row task-box">
            <div class="col-sm-3 task-info">
                <div class="box-heading">
                    <i class="fa fa-info" aria-hidden="true"></i> General</div>
                <ul>
                    <li>
                        <small>Project:</small>
                        <span>{{task.taskProjectName}}</span>
                    </li>
                    <li>
                        <small>List:</small>
                        <span>{{task.taskListName}}</span>
                    </li>
                </ul>
            </div>
            <div class="col-sm-3 task-info">
                <div class="box-heading">
                    <i class="fa fa-exchange" aria-hidden="true"></i> Assigned</div>
                <ul>
                    <li>
                        <small>Created by:</small>
                        <span>{{task.createdByName}}</span>
                    </li>
                    <li>
                        <small>Last modified by:</small>
                        <span>{{task.taskModifiedByName}}</span>
                    </li>
                </ul>
            </div>
            <div class="col-sm-3 task-info">
                <div class="box-heading">
                    <i class="fa fa-sliders" aria-hidden="true"></i> Status</div>
                <ul>
                    <li>
                        <small>Status:</small>
                        <span [ngClass]="setClass(task.taskStatus)">{{task.taskStatus}}</span>
                    </li>
                    <li>
                        <small>Priority:</small>
                        <span>Medium</span>
                    </li>
                </ul>
            </div>
            <div class="col-sm-3 task-info">
                <div class="box-heading">
                    <i class="fa fa-clock-o" aria-hidden="true"></i> Deadline</div>
                <ul>
                    <li>
                        <small>Deadline:</small>
                        <span>{{task.taskDeadline | date:'dd-MM-yyyy'}}</span>
                        <br />
                        <div *ngIf="this.hours >= 0" class="over">
                            <small>Over time:</small>
                            <span>{{remaining}}</span>
                        </div>
                        <div *ngIf="this.hours < 0">
                            <small>Remaining:</small>
                            <span>{{remaining}}</span>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
        <div class="row task-box">
            <div class="col-sm-12 task-description">
                <div class="box-heading">
                    <i class="fa fa-file-text-o" aria-hidden="true"></i> Description</div>
                <p>{{task.taskDescription}}</p>
            </div>
        </div>
        <div class="row task-box">
            <div class="col-sm-12 task-attachments">
                <div class="box-heading">
                    <i class="fa fa-paperclip" aria-hidden="true"></i> Attachments</div>
                <p>Feature not implemented yet.</p>
            </div>
        </div>
        <div class="row task-box">
            <task-comments></task-comments>
        </div>
    </div>
</div>